---
title: Analysis plan
jupyter:
  jupytext:
    text_representation:
      extension: .qmd
      format_name: quarto
      format_version: '1.0'
      jupytext_version: 1.16.2
  kernelspec:
    display_name: Python 3 (ipykernel)
    language: python
    name: python3
---

### First draft

- read in sites with locations in a country to a datframe
- read in raster of FWI, using X sample dates for the past year
- use [geopandas sampling](https://geopandas.org/en/stable/docs/user_guide/sampling.html) to get the raster values for each site location
- for each sampled raster set the date of the dataframe and concat the data to the existing data
- groupby date, getting the min, mean and max ast the values for each date
- plot the line/area chart using hvplot (interactive) and matplotlib(static)
- export to html and pdf

### Second draft
- sample for the past 10 years instead of 1, createing new mins, mean and max values
- repeat for multiple countries
- plot using subplots, to show the seasons across all countries where we have site data
- export to html and pdf

```{python}
import geopandas as gpd
import pandas as pd
```

```{python}
# read in the excel file of the sites
df = pd.read_excel('./data/DTM Nigeria Round 44 Dataset of Needs Monitoring Assessment for IDPs (2).xlsx', sheet_name=0)[['Site Name ', 'Latitude', 'Longitude','Type']]

# convert it to a geopandas geodataframe
gdf = gpd.GeoDataFrame(df, geometry=gpd.points_from_xy(df.Longitude, df.Latitude), crs="EPSG:4326")
```

```{python}
# show the data
gdf
```

```{python}
# quick map
gdf.explore()
```

